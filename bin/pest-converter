#!/usr/bin/env php
<?php

use Pest\Pestify\Console\ConvertCommand;
use Pest\Pestify\Console\InstallPestCommand;
use Symfony\Component\Console\Application;

(static function () {
    $possibleFiles = [__DIR__.'/../../../autoload.php', __DIR__.'/../../autoload.php', __DIR__.'/../vendor/autoload.php'];
    $file = null;
    foreach ($possibleFiles as $possibleFile) {
        if (file_exists($possibleFile)) {
            $file = $possibleFile;

            break;
        }
    }

    if (null === $file) {
        throw new RuntimeException('Unable to locate autoload.php file.');
    }

    require_once $file;
})();

$application = new Application('Pest\Pestify', 'dev-main');

$application->addCommands([
    new ConvertCommand(),
    new InstallPestCommand(),
]);

exit($application->run());
